<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Udgir Biryani Adda</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#d32f2f">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
  body { margin:0; font-family: 'Arial', sans-serif; background:#fff8f0; color:#333; }
  header { display:flex; align-items:center; padding:10px 20px; background:#d32f2f; color:white; }
  header img { height:50px; margin-right:15px; border-radius:8px; }
  header h1 { font-size:1.5rem; margin:0; }

  .contact-bar { text-align:center; padding:10px; background:#fff3e0; font-size:1rem; }
  .contact-bar a { text-decoration:none; color:#d32f2f; font-weight:bold; }

  .menu { display:flex; flex-wrap:wrap; justify-content:center; padding:20px; gap:15px; }
  .dish { background:#fff3e0; border-radius:10px; padding:15px; width:220px; text-align:center; box-shadow:0 2px 5px rgba(0,0,0,0.2); transition:transform 0.2s; }
  .dish:hover { transform:scale(1.03); }
  .dish img { width:100%; border-radius:10px; }
  .dish h3 { margin:10px 0 5px; font-size:1.1rem; }
  .dish p { margin:5px 0; font-weight:bold; }
  .dish button { background:#d32f2f; color:white; border:none; padding:8px 15px; border-radius:5px; cursor:pointer; transition:background 0.2s; }
  .dish button:hover { background:#b71c1c; }

  .order-form { max-width:400px; margin:20px auto; background:#ffe0b2; padding:20px; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
  .order-form h2 { text-align:center; margin-bottom:15px; }
  .order-form label { display:block; margin:10px 0 5px; font-weight:bold; }
  .order-form input, .order-form textarea { width:100%; padding:8px; border-radius:5px; border:1px solid #ccc; font-size:1rem; }
  .order-form button { margin-top:15px; width:100%; background:#d32f2f; color:white; border:none; padding:10px; border-radius:5px; font-size:16px; cursor:pointer; transition:background 0.2s; }
  .order-form button:hover { background:#b71c1c; }

  .location-btn { background:#ff5722; color:white; border:none; padding:12px 20px; border-radius:8px; font-size:16px; cursor:pointer; width:100%; margin-top:10px; transition:0.3s; }
  .location-btn:hover { background:#e64a19; transform:scale(1.05); }

  #dynamicOrderList { margin-top:15px; }
  #dynamicOrderList div { display:flex; justify-content:space-between; align-items:center; padding:10px; margin-bottom:10px; background:#fff; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
  #dynamicOrderList div div { display:flex; align-items:center; gap:8px; }
  #dynamicOrderList button { width:32px; height:32px; border:none; border-radius:5px; cursor:pointer; font-size:18px; display:flex; align-items:center; justify-content:center; transition:0.2s; }
  #dynamicOrderList button:hover { opacity:0.85; transform:scale(1.05); }
  #dynamicOrderList span { font-weight:600; min-width:24px; text-align:center; display:inline-block; }

  .confirmation { text-align:center; color:green; font-weight:bold; margin:20px 0; display:none; }

  #popupMessage { position: fixed; bottom:20px; left:50%; transform:translateX(-50%); background:#d32f2f; color:white; padding:10px 20px; border-radius:8px; font-size:16px; opacity:0; transition:opacity 0.5s ease, bottom 0.5s ease; z-index:1000; box-shadow:0 2px 8px rgba(0,0,0,0.3); }

  .contact-section { text-align:center; margin:30px 0; }
  .contact-section a { display:inline-block; margin:10px; font-size:22px; text-decoration:none; transition:transform 0.2s; }
  .contact-section a:hover { transform:scale(1.2); }

  footer { text-align:center; padding:10px; background:#fff3e0; font-weight:bold; }
  footer p { margin:0; }
  
  @media(max-width:600px){
    .menu { flex-direction:column; align-items:center; }
    .dish { width:90%; }
    .order-form { width:90%; }
  }
</style>
</head>
<body>

<!-- PWA Install Popup -->
<div id="pwa-install-popup" style="display:none; position: fixed; bottom:20px; left:50%; transform:translateX(-50%);
     background:white; border:2px solid #d32f2f; padding:15px 20px; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.2); z-index:9999; text-align:center;">
  <button onclick="closePwaPopup()" style="position:absolute; top:5px; right:10px; background:none; border:none; color:#d32f2f; font-size:18px; cursor:pointer;">‚úñ</button>
  <p style="margin:0 0 10px 0; font-weight:bold; color:#d32f2f;">Install Udgir Biryani Adda App</p>
  <button id="install-btn" style="background-color:#d32f2f; color:white; border:none; padding:8px 15px; border-radius:5px; cursor:pointer;">Install App</button>
</div>

<header>
  <img src="logo.png" alt="Logo">
  <h1>Udgir Biryani Adda</h1>
</header>

<div class="contact-bar">üìû <a href="tel:+919421229507">+91 94212 29507</a></div>

<div class="menu">
  <div class="dish">
    <img src="biryani.jpg" alt="Chicken Dum Biryani Full">
    <h3>Chicken Dum Biryani (Full)</h3>
    <p>‚Çπ149</p>
    <button onclick="addToOrder('Chicken Dum Biryani (Full)', 149)">Add to Order</button>
  </div>
  <div class="dish">
    <img src="biryani_half.jpg" alt="Chicken Dum Biryani Half">
    <h3>Chicken Dum Biryani (Half)</h3>
    <p>‚Çπ99</p>
    <button onclick="addToOrder('Chicken Dum Biryani (Half)', 99)">Add to Order</button>
  </div>
</div>

<div class="order-form">
  <h2>Place Your Order</h2>
  <form id="orderForm">
    <label for="name">Name:</label>
    <input type="text" id="name" required>

    <label for="phone">Phone Number:</label>
    <input type="tel" id="phone" required>

    <label for="address">Delivery Address:</label>
    <textarea id="address" rows="3" required></textarea>
    <button type="button" class="location-btn" onclick="captureLocation()">üìç Use My Current Location</button>

    <div id="dynamicOrderList"><p style="text-align:center;">No items added yet.</p></div>

    <label for="orderSummary">Your Order:</label>
    <textarea id="orderSummary" rows="4" readonly></textarea>

    <button type="button" style="background:#f44336; margin-top:10px;" onclick="clearOrder()">Clear Order</button>
    <button type="submit">Send Order via WhatsApp</button>
  </form>
</div>

<div class="confirmation" id="confirmation">‚úÖ Thank you! Your order has been sent to WhatsApp. We will contact you shortly.</div>

<div class="contact-section">
  <h3>üì≤ Connect with Us</h3>
  <a href="https://www.instagram.com/udgirbiryaniadda" target="_blank" style="color:#E4405F;"><i class="fab fa-instagram"></i></a>
  <a href="mailto:udgirbiryaniadda@gmail.com" style="color:#D44638;"><i class="fas fa-envelope"></i></a>
  <a href="https://wa.me/919421229507" target="_blank" style="color:#25D366;"><i class="fab fa-whatsapp"></i></a>
</div>

<div id="popupMessage"></div>

<footer>
  <p>‡§Ü‡§à ‡§≠‡§µ‡§æ‡§®‡•Ä‡§ö‡•Ä ‡§ï‡•É‡§™‡§æ ‡§∏‡§¶‡•à‡§µ üôè</p>
</footer>

<script>
const upiID = "YOURUPI@bank";
const yourWhatsAppNumber = "919421229507";
let orderItems = [];
let totalPrice = 0;
let liveLocationLink = '';

function addToOrder(name, price){
  let item = orderItems.find(i => i.name === name);
  if(item){ item.quantity += 1; } 
  else{ item = {name, price, quantity:1}; orderItems.push(item); }
  totalPrice = orderItems.reduce((sum,i)=>sum+i.price*i.quantity,0);
  updateOrderSummary();
  showPopup(`${item.quantity} ${item.name} added`);
}

function updateOrderSummary(){
  const summaryBox = document.getElementById('orderSummary');
  let summary='';
  orderItems.forEach((item,i)=>{ summary += `${i+1}. ${item.name} √ó${item.quantity} - ‚Çπ${item.price*item.quantity}\n`; });
  summary += `\nTotal: ‚Çπ${totalPrice}`;
  summaryBox.value = summary;

  const list = document.getElementById('dynamicOrderList');
  list.innerHTML='';
  if(orderItems.length===0){ list.innerHTML='<p style="text-align:center;">No items added yet.</p>'; return; }

  orderItems.forEach((item,i)=>{
    const row = document.createElement('div');
    row.innerHTML=`
      <span style="flex:1;">${item.name}</span>
      <div style="display:flex;align-items:center;gap:8px;">
        <button style="background:#d32f2f;color:white;" onclick="decreaseQty(${i})">‚Äì</button>
        <span>${item.quantity}</span>
        <button style="background:#43a047;color:white;" onclick="increaseQty(${i})">+</button>
      </div>
      <div style="font-weight:bold;">‚Çπ${item.price*item.quantity}</div>
    `;
    list.appendChild(row);
  });
}

function increaseQty(i){ orderItems[i].quantity+=1; totalPrice=orderItems.reduce((sum,i)=>sum+i.price*i.quantity,0); updateOrderSummary(); }
function decreaseQty(i){ if(orderItems[i].quantity>1){ orderItems[i].quantity-=1; } else{ orderItems.splice(i,1); } totalPrice=orderItems.reduce((sum,i)=>sum+i.price*i.quantity,0); updateOrderSummary(); }

function clearOrder(){ orderItems=[]; totalPrice=0; liveLocationLink=''; document.getElementById('address').disabled=false; updateOrderSummary(); }

function captureLocation(){
  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(
      pos=>{
        const lat=pos.coords.latitude, lon=pos.coords.longitude;
        liveLocationLink=`https://www.google.com/maps?q=${lat},${lon}`;
        alert('Live location captured!');
        document.getElementById('address').value=''; document.getElementById('address').disabled=true;
      },
      ()=>{ alert('Could not get location. Please enable location services.'); }
    );
  } else { alert('Geolocation not supported.'); }
}

document.getElementById('orderForm').addEventListener('submit', function(e){
  e.preventDefault();
  if(orderItems.length===0){ alert('Please add at least one item!'); return; }
  const name=document.getElementById('name').value;
  const phone=document.getElementById('phone').value;
  const address=liveLocationLink || document.getElementById('address').value;
  let orderText='';
  orderItems.forEach((item,i)=>{ orderText += `${i+1}. ${item.name} √ó${item.quantity} - ‚Çπ${item.price*item.quantity}\n`; });
  const upiLink=`upi://pay?pa=${upiID}&pn=UdgirBiryani&am=${totalPrice}&cu=INR`;
  let message=`üõí *New Biryani Order*\n\n*Name:* ${name}\n*Phone:* ${phone}\n*Address:* ${address}\n\n*Order:*\n${orderText}\n*Total:* ‚Çπ${totalPrice}\n\nüí≥ *Payment Options*:\n1. COD\n2. Online: ${upiLink}\n*Note:* Send screenshot if paid online.`;
  window.open(`https://wa.me/${yourWhatsAppNumber}?text=${encodeURIComponent(message)}`, '_blank');
  document.getElementById('confirmation').style.display='block';
  setTimeout(()=>{ document.getElementById('confirmation').style.display='none'; },5000);
  orderItems=[]; totalPrice=0; liveLocationLink=''; document.getElementById('address').disabled=false;
  updateOrderSummary(); this.reset();
});

function showPopup(msg,type='success'){
  const popup=document.getElementById('popupMessage');
  popup.innerText=msg; popup.style.background=type==='success'?'#4CAF50':'#f44336';
  popup.style.opacity=1; popup.style.bottom='40px';
  setTimeout(()=>{ popup.style.opacity=0; popup.style.bottom='20px'; },2000);
}

// PWA
if("serviceWorker" in navigator){ window.addEventListener("load",()=>{ navigator.serviceWorker.register("sw.js").then(reg=>console.log("SW registered"),err=>console.log("SW failed",err)); }); }
let deferredPrompt;
window.addEventListener('beforeinstallprompt',e=>{
  e.preventDefault();
  deferredPrompt=e;
  document.getElementById('pwa-install-popup').style.display='block';
});
document.getElementById('install-btn').addEventListener('click', async ()=>{
  if(deferredPrompt){ deferredPrompt.prompt(); const {outcome}=await deferredPrompt.userChoice; console.log(outcome); document.getElementById('pwa-install-popup').style.display='none'; deferredPrompt=null; }
});
function closePwaPopup(){ document.getElementById('pwa-install-popup').style.display='none'; }

</script>
</body>
</html>
