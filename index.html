<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Udgir Biryani Adda</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#d32f2f">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link rel="stylesheet" href="style.css">
  
<style>
/* General Styles */
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#fff8f0; }
header { text-align:center; padding:20px; background:#d32f2f; color:white; }
header img.logo { width:60px; border-radius:10px; vertical-align:middle; }
.contact-bar { text-align:center; margin:10px 0; font-size:16px; }
.menu { display:flex; flex-wrap:wrap; justify-content:center; margin:20px; }
.dish { background-color:#fff3e0; border-radius:10px; margin:10px; padding:15px; width:200px; text-align:center; box-shadow:0px 2px 5px rgba(0,0,0,0.2); }
.dish img { width:100%; border-radius:10px; }
.dish h3 { margin:10px 0 5px; }
.dish p { margin:5px 0; }
.dish button { background-color:#d32f2f; color:white; border:none; padding:8px 15px; border-radius:5px; cursor:pointer; }
.dish button:hover { background-color:#b71c1c; }

/* Order Form */
.order-form { max-width:400px; margin:20px auto; background-color:#ffe0b2; padding:20px; border-radius:10px; }
.order-form h2 { text-align:center; }
.order-form label { display:block; margin:10px 0 5px; }
.order-form input, .order-form textarea { width:100%; padding:8px; border-radius:5px; border:1px solid #ccc; }
.order-form button { margin-top:15px; width:100%; background-color:#d32f2f; color:white; border:none; padding:10px; border-radius:5px; font-size:16px; cursor:pointer; }
.order-form button:hover { background-color:#b71c1c; }

/* Location Button */
.location-btn { background-color:#ff5722; color:white; border:none; padding:12px 20px; border-radius:8px; font-size:16px; cursor:pointer; margin-top:10px; width:100%; transition: background-color 0.3s, transform 0.2s; }
.location-btn:hover { background-color:#e64a19; transform:scale(1.05); }

/* Dynamic Order List */
#dynamicOrderList { margin-top:15px; }
#dynamicOrderList div { display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; background:#fff; padding:10px; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
#dynamicOrderList div div { display:flex; align-items:center; gap:8px; }
#dynamicOrderList button { width:32px; height:32px; font-size:18px; border-radius:5px; border:none; cursor:pointer; display:flex; align-items:center; justify-content:center; padding:0; transition:0.2s; }
#dynamicOrderList button:hover { opacity:0.85; transform:scale(1.05); }
#dynamicOrderList span { font-weight:600; min-width:24px; text-align:center; display:inline-block; }

/* Confirmation */
.confirmation { text-align:center; color:green; font-weight:bold; margin:20px 0; display:none; }

/* Floating Cart Button */
.view-order-btn { position:fixed; right:20px; bottom:20px; background-color:#d32f2f; color:#fff; border:none; border-radius:50%; width:60px; height:60px; font-size:26px; display:none; align-items:center; justify-content:center; box-shadow:0 4px 10px rgba(0,0,0,0.3); cursor:pointer; z-index:9999; transition:all 0.3s ease; }
.view-order-btn:hover { background-color:#b71c1c; transform:scale(1.05); }
.view-order-btn span { position:absolute; top:6px; right:6px; background-color:#fff; color:#d32f2f; border-radius:50%; padding:3px 7px; font-size:14px; font-weight:bold; }
.show-btn { display:flex !important; animation:slideIn 0.3s ease; }
@keyframes slideIn { from { opacity:0; transform: translateY(20px);} to {opacity:1; transform:translateY(0);} }

/* PWA Install Popup */
#pwa-install-popup { display:none; position: fixed; top:10px; left:50%; transform:translateX(-50%) scale(0.95); background:#fff; color:#333; border:2px solid #d32f2f; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.2); padding:10px 15px; text-align:left; width:88%; max-width:320px; font-family:system-ui, sans-serif; transition:all 0.3s ease; z-index:9999; }
#pwa-install-popup button { cursor:pointer; }
#popupMessage { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: #d32f2f; color: white; padding: 10px 20px; border-radius: 8px; font-size: 16px; opacity: 0; transition: opacity 0.5s ease, bottom 0.5s ease; z-index:1000; box-shadow: 0 2px 8px rgba(0,0,0,0.3); }
footer { text-align:center; margin:30px 0; font-size:16px; }
.contact-section a { margin:10px; font-size:22px; text-decoration:none; }
</style>
</head>

<body>
<!-- PWA Install Popup -->
<div id="pwa-install-popup">
  <div style="display:flex; align-items:center; gap:10px;">
    <img src="logo.png" alt="App Logo" style="width:38px; height:38px; border-radius:8px;">
    <div style="flex:1;">
      <p style="margin:0; font-weight:600; font-size:15px;">Install Udgir Biryani Adda</p>
      <p style="margin:2px 0 0; font-size:13px; color:#666;">Get quick access anytime üçó</p>
    </div>
    <button id="install-btn" style="background:#d32f2f; color:white; border:none; border-radius:6px; font-size:13px; padding:6px 10px;">Install</button>
  </div>
  <button onclick="closePwaPopup()" style="position:absolute; top:5px; right:8px; background:none; border:none; color:#999; font-size:16px;">‚úï</button>
</div>

<header>
  <img src="logo.png" alt="Udgir Biryani Adda Logo" class="logo">
  <h1>Udgir Biryani Adda</h1>
</header>

<div class="contact-bar">
  üìû <a href="tel:+919421229507">+91 94212 29507</a>
</div>

<div class="menu">
  <div class="dish">
    <img src="biryani.jpg" alt="Chicken Dum Biryani (Full)">
    <h3>Chicken Dum Biryani (Full)</h3>
    <p>‚Çπ149</p>
    <button onclick="addToOrder('Chicken Dum Biryani (Full)',149)">Add to Order</button>
  </div>
  <div class="dish">
    <img src="biryani_half.jpg" alt="Chicken Dum Biryani (Half)">
    <h3>Chicken Dum Biryani (Half)</h3>
    <p>‚Çπ99</p>
    <button onclick="addToOrder('Chicken Dum Biryani (Half)',99)">Add to Order</button>
  </div>
</div>

<div class="order-form" id="order-section">
  <h2>Place Your Order</h2>
  <form id="orderForm">
    <label for="name">Name:</label>
    <input type="text" id="name" required>
    <label for="phone">Phone Number:</label>
    <input type="tel" id="phone" required>
    <label for="address">Delivery Address:</label>
    <textarea id="address" rows="3" required></textarea>
    <button type="button" class="location-btn" onclick="captureLocation()">üìç Use My Current Location</button>
    <div id="dynamicOrderList"><p style="text-align:center;">No items added yet.</p></div>
    <label for="orderSummary">Your Order:</label>
    <textarea id="orderSummary" rows="4" readonly></textarea>
    <button type="submit">Send Order via WhatsApp</button>
  </form>
</div>

<div class="confirmation" id="confirmation">
  ‚úÖ Thank you! Your order has been sent to WhatsApp. We will contact you shortly.
</div>

<!-- Floating Cart Button -->
<div id="viewOrderBtn" class="view-order-btn">üõí<span id="cartCount">0</span></div>

<!-- Contact Section -->
<div class="contact-section" style="text-align:center;">
  <h3>üì≤ Connect with Us</h3>
  <a href="https://www.instagram.com/udgirbiryaniadda" target="_blank" style="color:#E4405F;"><i class="fab fa-instagram"></i></a>
  <a href="mailto:udgirbiryaniadda@gmail.com" style="color:#D44638;"><i class="fas fa-envelope"></i></a>
  <a href="https://wa.me/919421229507" target="_blank" style="color:#25D366;"><i class="fab fa-whatsapp"></i></a>
</div>

<div id="popupMessage"></div>

<footer>
  <p class="footer-blessing">‡§Ü‡§à ‡§≠‡§µ‡§æ‡§®‡•Ä‡§ö‡•Ä ‡§ï‡•É‡§™‡§æ ‡§∏‡§¶‡•à‡§µ üôè</p>
</footer>

<script>
const upiID = "YOURUPI@bank";
const yourWhatsAppNumber = "919421229507";
let orderItems = [];
let totalPrice = 0;
let liveLocationLink = '';
let deferredPrompt;

// Popup
function showPopup(msg,type="success"){
  const popup=document.getElementById('popupMessage');
  popup.innerText=msg;
  popup.style.background = type==="success"?"#4CAF50":"#f44336";
  popup.style.opacity="1";
  popup.style.bottom="40px";
  setTimeout(()=>{popup.style.opacity="0"; popup.style.bottom="20px";},2000);
}

// Add to Order
function addToOrder(name,price){
  let item = orderItems.find(i=>i.name===name);
  if(item) item.quantity+=1;
  else orderItems.push({name,price,quantity:1});
  totalPrice = orderItems.reduce((sum,i)=>sum+i.price*i.quantity,0);
  updateOrderSummary();
  updateCartCount();
  showPopup(`‚úÖ ${name} added`);
}

// Update Order List
function updateOrderSummary(){
  const orderSummary = document.getElementById('orderSummary');
  let summary='';
  orderItems.forEach((item,index)=>summary+=`${index+1}. ${item.name} √ó${item.quantity} - ‚Çπ${item.price*item.quantity}\n`);
  summary+=`\nTotal: ‚Çπ${totalPrice}`;
  orderSummary.value = summary;

  const list = document.getElementById('dynamicOrderList');
  list.innerHTML='';
  if(orderItems.length===0){ list.innerHTML='<p style="text-align:center;">No items added yet.</p>'; return; }
  orderItems.forEach((item,i)=>{
    const row = document.createElement('div');
    row.innerHTML=`<span style="flex:1;">${item.name}</span>
    <div style="display:flex;align-items:center;gap:8px;">
      <button style="background:#d32f2f;color:white;width:28px;height:28px;" onclick="decreaseQty(${i})">‚Äì</button>
      <span>${item.quantity}</span>
      <button style="background:#43a047;color:white;width:28px;height:28px;" onclick="increaseQty(${i})">+</button>
    </div>`;
    list.appendChild(row);
  });
}

// Quantity Adjust
function increaseQty(i){ orderItems[i].quantity+=1; totalPrice=orderItems.reduce((s,it)=>s+it.price*it.quantity,0); updateOrderSummary(); updateCartCount(); showPopup(`‚úÖ ${orderItems[i].name} quantity increased`);}
function decreaseQty(i){ const name=orderItems[i].name; if(orderItems[i].quantity>1) orderItems[i].quantity-=1; else orderItems.splice(i,1); totalPrice=orderItems.reduce((s,it)=>s+it.price*it.quantity,0); updateOrderSummary(); updateCartCount(); showPopup(`‚úÖ ${name} quantity updated`);}

// Cart Count & View Button
const viewBtn=document.getElementById("viewOrderBtn");
const countSpan=document.getElementById("cartCount");
function updateCartCount(){ let count=orderItems.reduce((s,i)=>s+i.quantity,0); countSpan.textContent=count; if(count>0) viewBtn.classList.add("show-btn"); else viewBtn.classList.remove("show-btn"); }
viewBtn.addEventListener('click',()=>document.getElementById('order-section').scrollIntoView({behavior:'smooth'}));

// Capture Location
function captureLocation(){
  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(pos=>{
      const lat=pos.coords.latitude, lon=pos.coords.longitude;
      liveLocationLink=`https://www.google.com/maps?q=${lat},${lon}`;
      alert('Live location captured!');
      document.getElementById('address').value=''; document.getElementById('address').disabled=true;
    }, ()=>alert('Enable location services.'));
  }else alert('Geolocation not supported.');
}

// Order Submit
document.getElementById('orderForm').addEventListener('submit', function(e){
  e.preventDefault();
  if(orderItems.length===0){ alert('Add at least one item!'); return; }
  const name=document.getElementById('name').value;
  const phone=document.getElementById('phone').value;
  const address=liveLocationLink || document.getElementById('address').value;
  let orderText=''; orderItems.forEach((it,i)=>orderText+=`${i+1}. ${it.name} √ó${it.quantity} - ‚Çπ${it.price*it.quantity}\n`);
  const upiLink=`upi://pay?pa=${upiID}&pn=UdgirBiryani&am=${totalPrice}&cu=INR`;
  const message=`üõí *New Biryani Order*\n\nName: ${name}\nPhone: ${phone}\nAddress: ${address}\n\nOrder:\n${orderText}\nTotal: ‚Çπ${totalPrice}\n\nüí≥ Payment Options:\n1. COD\n2. Online Payment: ${upiLink}\nNote: If paid online, send screenshot.`;
  window.open(`https://wa.me/${yourWhatsAppNumber}?text=${encodeURIComponent(message)}`,'_blank');
  document.getElementById('confirmation').style.display='block';
  orderItems=[]; totalPrice=0; liveLocationLink=''; document.getElementById('address').disabled=false;
  updateOrderSummary(); updateCartCount(); this.reset();
});

// PWA Install
window.addEventListener('beforeinstallprompt', e=>{
  e.preventDefault(); deferredPrompt=e;
  const popup=document.getElementById('pwa-install-popup'); popup.style.display='block';
});
document.getElementById('install-btn').addEventListener('click', async ()=>{
  if(deferredPrompt){ deferredPrompt.prompt(); const {outcome}=await deferredPrompt.userChoice;
    if(outcome==='accepted') showPopup("üéâ App installed successfully!"); else showPopup("‚ùå Installation canceled","error");
    document.getElementById('pwa-install-popup').style.display='none'; deferredPrompt=null;
  }
});
function closePwaPopup(){ const popup=document.getElementById('pwa-install-popup'); popup.style.opacity='0'; popup.style.transform='translateX(-50%) scale(0.95)'; setTimeout(()=>popup.style.display='none',500);}
</script>

</body>
</html>
